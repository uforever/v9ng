const fs = require("fs");
const { VM, VMScript } = require("vm2");
const jsdom = require("jsdom");
const { JSDOM } = jsdom;
const html = `<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta content="{q|gQaNoVfmpAv0NAumwJCYhUp99HCYkx9rJW2AbYkRJHVZwhupdEYQkM1zvoVl5hkzaprqxV0LKoKLkYu2hqfghVfyLt27QVuwtt9A0Ik7QqKlOpG2Ix9L9QkzUJoSr3ARAEv0RQmTy1TlTss2HoY9ThnlxtSAxDpaHiu3bxuZTlGAcqpVRxpLrtulNAS96o9ENtp2hHSqSH1ATkupvAraVhrqemKE7Fm0yHfleH0VhrY9oYrapqk9wmALiiPL9mT01xfL1t0q1HPfDcG7BDm71pl33EO0UEsESpcxhlY0Jg9IYp1ifGPEOg1EGgeVOQ3h1EulP9iimWCcsEpkKGQm26649Ddfe167 0wR7HvJ6IsUC410DntKRngA;QyqA82EGtIB6ePNEeYo9NG;iEm6gdSTTpYiqU10OlvsnG;yMG8gk5okQ97gP4eb.IadA;T8F36FaS9AtR4sXBkRr0iG;RTlM3IYjAzboXbIiNSIFRA;t7_svh3Kc3.VU9jOjAJgdq;.8D9Zx78FrKF.Zn4xbfmIG;IMhCM7gXESIqShs5TNMo9A;pvBPF7OtrK6trS5vZYizwa;9qxqLXuEeDQeAlNfAL_l.A;VNeyFcNDtQZhV2sfCxyHqA;kT4JL2WRSOhvUIEcOjSrva;LpFhLGWYI8eFx_X999MLEq;NqssQaVItFB0TevtNxJrkG;AI3RN3R7lP0BBnYsoCO5KG;xrYRhwM6FYW7zCsPL.iecq;0kOXzZzt1eXLrlPo.QQ4xG;ApKNqLIRoybF5rIxSnabBG;hfgZrtz_KscdFC6a3f1wKA;qYwUElQ9qYzVr5.rT.AedBfr0t1074790432hGXi3lruePgtr0l3650VkhAeGOKDi3W4fk_rJ39_qqq|vWrLWQTy.pKGAFV2XY1E11m2mYlw8qprJYrG18KeEU9pI1mpTMa9AA2mqYpW18Ye6YCxNpvStFYyyY6WmRbVmcoQiAAz2IbEHYbfKkYS8Yvr5tCqNYvwstTZhQfSjW2ZNUpzMivEgqqxctbx6QPSQRbEIqaRdc9AfQbTKoGV5psNpHm0Lppfrt27MVpY1kvW3Y1LrsDGrROzBJmaTKuRMkA3hASesKVqXwTpohTTJlqRpoVVUkYmgo9Ebrf22WKlMApRYYqW7pnT8iY7Hl9lqqqqqqqqqqqqqqKs.VN46AfaRhGNFUdzK7wjqWiLQkBGnek.9xq|WIvzWAVwHprWMcYg5oIAUeSBFW8lVgp6SYjlz4So.mIgIdrBJlX0JyYkwmXqw5avacHQgdSdvm.xUXkvnc7gI_SI4oHQMzmbycH7W4rIHlERUOq6sl70tOYbDK3g2b1Hxsxrtv0slmegtaAuKVWqhafMfczEt0p_opEetOpkRcJqRCa.VkxEi0ABRmelJbTb1mj0wjqb2ctr8GrtbkFrR2mcXD4GwBf8ecjQpLYcOk.0UN2M0UBJUO9nhc80QKQf75Kde3HTX5DoyFHe.5Du4F5Jj|[DqyfiUNw89qOFcea1vmLh62ME1YpAPJYwYSBYTaG8nTstDSxtDGXInJctK9zYCZVMSJooYmcF0pSlvmHF0wSmTaV1of7FmAhsY3z1mYhETwfV2EJVvzfQ0xYsTTrVKfLQ6S.8CaDYcyR8vWS8125EKZjQ1rnhbZzEaehDYLxV1qNDoZ08GlBoPJ21srixT9A8OzVqml0ESmwhvANQspBR6zuUPR1xYeYtcQCrvgDtYEBVk3WFTSZp2gpVfrIUPGjJG25cn2Rh0VCDCzxQPA.sU0H8PmEr1JWFOJ8ongpYOqzsCfmsawJyn64MWRT_PWh8onLmBFtAtIhMSEw3i6Wp9bk162l4096r4r0r1.eauq3w79tSvuiPottYbdUu6wjeuCKExnd4FR2GnbyF0qq!x7z,aac,amr,asm,avi,bak,bat,bmp,bin,c,cab,css,csv,com,cpp,dat,dll,doc,dot,docx,exe,eot,fla,flc,fon,fot,font,gdb,gif,gz,gho,hlp,hpp,htc,ico,ini,inf,ins,iso,js,jar,jpg,jpeg,json,java,lib,log,mid,mp4,mpa,m4a,mp3,mpg,mkv,mod,mov,mim,mpp,msi,mpeg,obj,ocx,ogg,olb,ole,otf,py,pyc,pas,pgm,ppm,pps,ppt,pdf,pptx,png,pic,pli,psd,qif,qtx,ra,rm,ram,rmvb,reg,res,rtf,rar,so,sbl,sfx,swa,swf,svg,sys,tar,taz,tif,tiff,torrent,txt,ttf,vsd,vss,vsw,vxd,woff,woff2,wmv,wma,wav,wps,xbm,xpm,xls,xlsx,xsl,xml,z,zip,apk,plist,ipaqqqqqqqqqqqqq"><!--[if lt IE 9]><script r='m'>document.createElement("section")</script><![endif]--><script type="text/javascript" charset="iso-8859-1" src="/4QbVtADbnLVIc/c.FxJzG50F.dfe1675.js" r='m'></script><script type="text/javascript" r="m">(function(){var _$hG=0,_$4n=[[10,6,0,9,5,4,8,2,3,1,7],[56,41,76,38,92,10,21,57,49,57,11,69,35,75,86,65,1,44,82,46,95,0,62,83,99,87,48,58,57,29,24,90,72,33,6,79,23,85,91,28,79,63,94,93,57,81,66,79,88,73,30,38,26,79,22,42,17,16,4,51,12,80,79,14,71,79,64,54,2,43,57,18,13,78,2,20,77,57,84,2,57,55,38,61,74,7,97,32,57,68,3,45,47,50,37,34,5,9,8,70,36,60,19,25,31,27,52,59,15,40,39,53,96,89,67,98,57],[24,32,11,17,11,3,29,0,23,13,10,26,9,25,19,10,28,5,30,5,4,21,12,16,8,20,31,2,31,1,31,22,31,15,27,31,6,31,18,14,33,7,10],[12,28,37,46,42,35,13,11,27,22,17,34,29,8,47,31,26,7,5,30,6,45,29,16,42,23,9,20,39,0,28,10,25,36,21,10,3,43,40,43,1,38,1,18,29,43,32,18,26,14,41,19,2,44,15,40,18,32,14,11,4,24,33,13],[34,36,25,21,36,20,32,9,28,3,36,12,24,14,36,26,27,14,30,13,33,31,11,0,1,18,30,2,19,22,35,5,11,23,18,10,2,36,8,16,17,7,28,4,6,15,29]];function _$Ms(_$p3,_$JX){return _$NX.Math.abs(_$p3)%_$JX;}function _$Z4(_$uf){_$Io(_$uf);_$uf[2]=_$DC()-_$uf[_$Ms(_$Yv(),16)];if(_$tD()-_$uf[_$Ms(_$cf(),16)]){_$uf[3]=_$DC();}if(_$uf[_$Ms(_$Ci()+_$5a(),16)]){_$TK(_$uf);}var _$Nf=_$DC();if(_$uf[_$Ms(_$Ci()+_$5a(),16)]){if(_$uf[_$Ms(_$cf(),16)]){var _$8S=_$fj();}}return _$3f(_$uf);}function _$Io(_$uf){_$OV(_$uf);var _$zA=_$Gt();var _$Nf=_$Ci()+_$5a();_$uf[6]=_$Dh()+_$YU();_$uf[_$Ms(_$uf[_$Ms(_$Yv(),16)],16)]=_$j4(_$uf);_$uf[4]=_$r1(_$uf);return _$7s(_$uf);}function _$OV(_$uf){_$uf[_$Ms(_$fj(),16)]=_$Ci();var _$zA=_$$J();var _$Nf=_$cf();_$uf[_$Ms(_$YU(),16)]=_$DC();_$1p(_$uf);return _$Dh();}function _$fj(){return 15}function _$Ci(){return 5}function _$$J(){return 6}function _$cf(){return 4}function _$YU(){return 3}function _$DC(){return 9}function _$1p(_$uf){var _$zA=_$bg();var _$8S=_$$J();var _$8S=_$Jo();var _$zA=_$fj();var _$Nf=_$Ci();_$uf[11]=_$tD();return _$ID();}function _$bg(){return 8}function _$Jo(){return 2}function _$tD(){return 1}function _$ID(){return 7}function _$Dh(){return 13}function _$Gt(){return 14}function _$5a(){return 11}function _$Yv(){return 12}function _$j4(_$uf){_$uf[8]=_$$J();var _$Nf=_$YU();var _$8S=_$DC();var _$8S=_$8R();var _$Nf=_$bg();return _$$J();}function _$8R(){return 10}function _$r1(_$uf){_$uf[0]=_$Gt();_$uf[12]=_$8R();_$uf[8]=_$$J();return _$cf();}function _$7s(_$uf){_$uf[_$Ms(_$DC(),16)]=_$fj();_$uf[5]=_$5a();_$yX(_$uf);_$uf[3]=_$DC();_$WF(_$uf);return _$tD()+_$ID();}function _$yX(_$uf){_$uf[7]=_$Dh();_$uf[_$Ms(_$5S(),16)]=_$Gt();_$uf[12]=_$8R();_$uf[_$Ms(_$tD(),16)]=_$ID();return _$Dh();}function _$5S(){return 0}function _$WF(_$uf){_$uf[_$Ms(_$8R(),16)]=_$bg();_$uf[6]=_$cf();_$uf[2]=_$5S();_$uf[14]=_$Yv();return _$8R();}function _$TK(_$uf){_$uf[_$Ms(_$Dh(),16)]=_$YU();var _$8S=_$5a();if(_$Gt()){var _$8S=_$tD();}var _$8S=_$fj();var _$zA=_$Ci();return _$uf[_$Ms(_$bg(),16)];}function _$Vi(_$uf){_$uf[7]=_$Dh();_$uf[_$Ms(_$5S(),16)]=_$Gt();_$uf[12]=_$8R();return _$tD()+_$ID();}function _$3f(_$uf){var _$Nf=_$fj();var _$zA=_$Ci();_$L6(_$uf);var _$8S=_$tD();if(_$DC()+_$fj()){var _$Nf=_$ID();}var _$8S=_$5S();if(_$uf[_$Ms(_$bg(),16)]){if(_$ID()){var _$8S=_$Gt();}}_$uf[_$Ms(_$Ci()+_$5a(),16)]=_$mC(_$uf);return _$jh(_$uf);}function _$L6(_$uf){var _$Nf=_$Yv();if(_$$J()){_$uf[_$Ms(_$Dh(),16)]=_$YU();}_$uf[8]=_$$J();var _$zA=_$8R();if(_$Dh()){_$uf[3]=_$DC();}var _$zA=_$cf();return _$ZE(_$uf);}function _$ZE(_$uf){_$uf[0]=_$Gt();_$uf[12]=_$8R();_$uf[_$Ms(_$tD(),16)]=_$ID();return _$Dh();}function _$rD(_$uf){_$uf[_$Ms(_$5S(),16)]=_$Gt();_$uf[12]=_$8R();var _$8S=_$ID();var _$8S=_$Dh();_$uf[_$Ms(_$5S(),16)]=_$Gt();return _$Yv();}function _$mC(_$uf){_$uf[_$Ms(_$Dh(),16)]=_$YU();var _$zA=_$Yv();var _$Nf=_$8R();_$uf[8]=_$$J();return _$cf();}function _$jh(_$uf){_$uf[0]=_$Gt();_$uf[_$Ms(_$Ci(),16)]=_$5a();_$9O(_$uf);return _$DC();}function _$9O(_$uf){_$uf[7]=_$Dh();_$uf[3]=_$DC();_$uf[_$Ms(_$Yv(),16)]=_$8R();var _$zA=_$ID();var _$8S=_$Dh();return _$YU();}var _$uu,_$4G,_$NX,_$34,_$9g,_$Z4,_$Tm;var _$GT,_$VN,_$Gz=_$hG,_$nn=_$4n[0];while(1){_$VN=_$nn[_$Gz++];if(_$VN<4){if(_$VN<1){_$9g=_$NX['$_ts'];}else if(_$VN<2){_$GT= !_$9g;}else if(_$VN<3){_$d9(0);}else{_$Gz+=-5;}}else if(_$VN<8){if(_$VN<5){if( !_$GT)_$Gz+=1;}else if(_$VN<6){return;}else if(_$VN<7){_$NX=window,_$Tm=String,_$34=Array;}else{_$Gz+=-6;}}else{if(_$VN<9){_$9g=_$NX['$_ts']={};}else if(_$VN<10){_$Gz+=5;}else{_$uu=[4,16,64,256,1024,4096,16384,65536];}}}function _$d9(_$zA,_$p3){function _$vP(){var _$Tm=_$DV.charCodeAt(_$9V++ ),_$Ms;if(_$Tm<128){return _$Tm;}else if(_$Tm<251){return _$Tm-32;}else if(_$Tm===251){return 0;}else if(_$Tm===254){_$Tm=_$DV.charCodeAt(_$9V++ );if(_$Tm>=128)_$Tm-=32;_$Ms=_$DV.charCodeAt(_$9V++ );if(_$Ms>=128)_$Ms-=32;return _$Tm*219+_$Ms;}else if(_$Tm===255){_$Tm=_$DV.charCodeAt(_$9V++ );if(_$Tm>=128)_$Tm-=32;_$Ms=_$DV.charCodeAt(_$9V++ );if(_$Ms>=128)_$Ms-=32;_$Tm=_$Tm*219*219+_$Ms*219;_$Ms=_$DV.charCodeAt(_$9V++ );if(_$Ms>=128)_$Ms-=32;return _$Tm+_$Ms;}else if(_$Tm===252){_$Ms=_$DV.charCodeAt(_$9V++ );if(_$Ms>=128)_$Ms-=32;return -_$Ms;}else if(_$Tm===253){_$Tm=_$DV.charCodeAt(_$9V++ );if(_$Tm>=128)_$Tm-=32;_$Ms=_$DV.charCodeAt(_$9V++ );if(_$Ms>=128)_$Ms-=32;return _$Tm* -219-_$Ms;}else{}}var _$9V,_$DV,_$6x,_$f9,_$Tm,_$Ms,_$hG,_$Gz,_$GT,_$jd,_$VN,_$nn,_$uf,_$I4,_$oe,_$8S,_$Nf,_$c9,_$Nd,_$FT;var _$OV,_$Ci,_$Io=_$zA,_$$J=_$4n[1];while(1){_$Ci=_$$J[_$Io++];if(_$Ci<64){if(_$Ci<16){if(_$Ci<4){if(_$Ci<1){_$Tm+="WRxC_$nbJ7V_YpilhRnp_wVX0ADv8hC3TZje6Y9J8NLDn_sXtHwiMIdI5OiCxPCS1FLVKiIdsk$yVylPZ36Eud6bT1XOSdK15GB7kMEj8jmVARHLOA1uLPvoY4J1Dd9t7Bu9aoA165hX9r8A2LFsKWcwCT7ID$FAvUtOXBtE9ehK_Y4FslHSnLoa";}else if(_$Ci<2){var _$Tm='';}else if(_$Ci<3){if( !_$OV)_$Io+=1;}else{_$p3._$NX=82;}}else if(_$Ci<8){if(_$Ci<5){for(_$oe=0;_$oe<_$FT;_$oe++ ){_$uf.push("}");}}else if(_$Ci<6){_$p3._$8P="_$Nf";}else if(_$Ci<7){var _$Ms=_$d9(8);}else{_$Tm=_$NX.eval;}}else if(_$Ci<12){if(_$Ci<9){_$p3._$yq="_$Io";}else if(_$Ci<10){_$p3._$oI="_$zA";}else if(_$Ci<11){_$Io+=1;}else{var _$Tm,_$Ms,_$hG=_$p3.length,_$Gz=new _$34(_$hG/2),_$GT='_$';}}else{if(_$Ci<13){var _$8S=_$uf.join('');}else if(_$Ci<14){_$Tm=_$Tm.replace(/[\r\n\s]/g,"");}else if(_$Ci<15){_$Ms=_$d9(8);}else{_$p3._$7n="_$uu";}}}else if(_$Ci<32){if(_$Ci<20){if(_$Ci<17){for(_$oe=0;_$oe<_$FT;_$oe++ ){_$hc(16,_$oe,_$uf);}}else if(_$Ci<18){var _$FT=_$vP();}else if(_$Ci<19){var _$Tm=_$NX.eval.toString();}else{_$p3._$9g="qFpRb7ZZ4vA";}}else if(_$Ci<24){if(_$Ci<21){return 1;}else if(_$Ci<22){_$hc(0);}else if(_$Ci<23){_$9V+=_$nn;}else{var _$f9=_$9g.aebi=[];}}else if(_$Ci<28){if(_$Ci<25){var _$DV=_$9g["dfe1675"];}else if(_$Ci<26){_$p3._$WU="lnF2mk39srq";}else if(_$Ci<27){_$c9=_$DV.substr(_$9V,_$nn).split(String.fromCharCode(255));}else{_$p3._$hd="hW7bS7jqt4G";}}else{if(_$Ci<29){var _$9V=0;}else if(_$Ci<30){_$9g._$M5=new Date().getTime();}else if(_$Ci<31){_$OV=_$FT>0;}else{_$p3._$p3="hSNUWvWIfv6CZ2H9uEeiq7";}}}else if(_$Ci<48){if(_$Ci<36){if(_$Ci<33){return ret;}else if(_$Ci<34){var _$Tm=_$d9(8);}else if(_$Ci<35){_$p3._$6T="_$8S";}else{return _$Gz;}}else if(_$Ci<40){if(_$Ci<37){_$p3._$jd="_$fj";}else if(_$Ci<38){_$p3._$Ye="_$oe";}else if(_$Ci<39){if( !_$OV)_$Io+=2;}else{_$p3._$q5="_$Tu";}}else if(_$Ci<44){if(_$Ci<41){_$p3._$hc="_$7o";}else if(_$Ci<42){_$d9(89,_$9g);}else if(_$Ci<43){var _$uf=[];}else{_$9g._$QD=1;}}else{if(_$Ci<45){_$Tm+="uu4GNX349gZ4p3JXvPDV6xf99VNdI4c9vuzYJjeK4zO8_lBWyYWUBw5u_ZzMXjxsojEQwAM5h6Zn4nNvd9hcV7ReTmMshGGzGTjdVNnnufFToe8SNfzAIoOVfjCi$JcfYUDC1pbgJotDIDDhGt5aYvj48Rr17syX5SWFTKVi3fL6ZErDmCjh9O9j";}else if(_$Ci<46){_$p3._$yY=1;}else if(_$Ci<47){_$Tm+="2KDjeu06zFNsl4MfTubZdYxklfDWQD7nq5IQiMLA7hamnPw1FwZahqhA7OVEq3Ll$GlslJ$8DuqmF3iwRxk9I5Md$O2h2RxdR4_AIYqLMLgWGAE3MHqfeRD8BMd_i9Y6DJqjU3WzooJKPZqlUNzzAzVV8oFQ3sXMA5Pi9ysuKa8l26S2V5cyKfPU";}else{_$p3._$ih="_$OV";}}}else{if(_$Ci<52){if(_$Ci<49){_$Tm+="9Dq8ZKeibX$WMTD5n6HKNhxzpUb4DUYO2qTRAfYMEi7YENp4sA5h4iidiNmIfCs5CnqBenkBQnFUzqRtjxB2jE9anJzXsp$gaHGh5P_OPsEz09FvFS2FbAjH632GmhNRuGg4dHswRwEM7u4_5LIHi7QZ0cgG7NWK9frz50ioILnfszM3mHPvNIemsm";}else if(_$Ci<50){return new Date().getTime();}else if(_$Ci<51){_$p3._$bN="_$FT";}else{_$uf.push(")();");}}else if(_$Ci<56){if(_$Ci<53){_$p3._$34=_$Z4;}else if(_$Ci<54){_$p3._$V7="_$ru";}else if(_$Ci<55){_$OV=_$Nf-_$Tm>12000;}else{_$OV=_$NX.execScript;}}else if(_$Ci<60){if(_$Ci<57){_$9g._$vT=_$d9(16);}else if(_$Ci<58){return;}else if(_$Ci<59){return _$d9(10,_$Tm);}else{_$p3._$d9="bgA0aTOxtK3sWi3Dq7hozG";}}else{if(_$Ci<61){_$p3._$GT="_$Nv";}else if(_$Ci<62){ret=_$NX.execScript(_$p3);}else if(_$Ci<63){_$Tm+="oEmEFdrkP83Antz3M9$iuUiD4DKFOXv40rtvPCj7q2OJrZaakmE1HWoXuLjPF7vE_Mlm1kumA0xtHIEtVlGQbinyWQo_TpCHo3M_k8ABmxqHDXv6bB0x6slYikdDU20P4LmcoHP0OzDIxm89Z2XAEWPMi$5QMXVhUkvDyxL2UFy1x5eliL0Jgkgh";}else{var _$GT=_$vP();}}}}else{if(_$Ci<80){if(_$Ci<68){if(_$Ci<65){var _$Nf=_$d9(8);}else if(_$Ci<66){_$Io+=29;}else if(_$Ci<67){var _$VN=_$vP();}else{_$p3._$iM="_$UL";}}else if(_$Ci<72){if(_$Ci<69){_$p3._$BW=34;}else if(_$Ci<70){for(_$Tm=0,_$Ms=0;_$Ms<_$hG;_$Ms+=2){_$Gz[_$Tm++ ]=_$GT+_$p3.substr(_$Ms,2);}}else if(_$Ci<71){_$p3._$7G="_$Ci";}else{_$d9(78,_$8S);}}else if(_$Ci<76){if(_$Ci<73){var _$6x=_$9g._$vT;}else if(_$Ci<74){var _$nn=_$vP();}else if(_$Ci<75){_$Io+=2;}else{_$Io+=30;}}else{if(_$Ci<77){_$OV=_$9g["dfe1675"];}else if(_$Ci<78){return 0;}else if(_$Ci<79){_$OV=_$Tm!=="functioneval(){[nativecode]}";}else{}}}else if(_$Ci<96){if(_$Ci<84){if(_$Ci<81){_$9g._$M5-=_$d9(8);}else if(_$Ci<82){var _$I4=_$vP();}else if(_$Ci<83){_$Tm+="rqwKz0tACvMq7ya1laTD2$j3GeXoO_bT3_EPOGaQgi0Rsc8L$4hkZcTIKnHUU_huYyfZerBdbNYe8PoIyqih6T7G8efJXCrusbvn3Q7oOiV3y8aMae7M0d0IKp9LIk9ZrW75FmjFhdQpvT8$7bydlAgJ77wm4QOycIdho8YJfn_FFVNBjohSMeuh";}else{_$Tm+="eaNcgZQX54WZOBoMlKn231A6pbupKmFO3vQhKETzmYjWkD4WuknivCP_30Zb3qoprLaphCWdekmQx72HlpqAiHprk643zUplT9inFxc00LmK7_ye$5T_T$PfM2y0tll_kygxFHwtJGPKE44oq$oDtrM8c2GWWw5p9KAUNLFMjcteDp1O6Dc3QEIz";}}else if(_$Ci<88){if(_$Ci<85){_$OV=_$p3===undefined||_$p3==="";}else if(_$Ci<86){var _$hG=_$d9(71);}else if(_$Ci<87){var _$Nd=_$vP();}else{_$Tm+="vea5H2IGFY8bjvpeOZNK5Yga3VwwX$UhzaWN_Nt62bK_4OfOy$6uP6zEokjpBgO1wIN6$vs2UwZGHHOIXcuEXVc5JyMgTORI9v1XNY18kFoNBumvX4uvmSE2j8XYlrtQLLTX1LOosCrQ2dUEZYh33ixaYTXEKhX0guOv3Rtjltr7ZzoxBOEIazex";}}else if(_$Ci<92){if(_$Ci<89){_$FT=_$vP();}else if(_$Ci<90){_$p3._$4n="_$0d";}else if(_$Ci<91){_$9g["dfe1675"]=_$4G;}else{var _$Gz=_$DV.length;}}else{if(_$Ci<93){_$d9(29);}else if(_$Ci<94){_$Io+=-30;}else if(_$Ci<95){var _$jd=_$vP();}else{_$Tm+="8nQFB9rpQK$Dg82owlJdBY9sCdhWm62seHATysOHEVpNU5g30h0$jwfiKts_21hld6vrUoVgmdHkibKbwnK$ig$3Ag0YO2HmBqHiueeIYq4dROL76vsHbp7ZIW_1h2fpSRbGMVu5mBogIvdFle5gG4y4OPh7y7kArbNCRKlG4$9cZ0LZ$M_qkiHQ";}}}else{if(_$Ci<97){_$p3._$IQ="_$5X";}else if(_$Ci<98){ret=_$Tm.call(_$NX,_$p3);}else if(_$Ci<99){_$p3._$Re="_$Kp";}else{_$Tm+="aOh5sQK4t3j1nr9E7D2WO7e1CupZcoPtpf$maWi_h9oLvhCKTBBRBaQWFaiznoc8WenFjnt4uiUsjZHC1dto2yU7Su3rvm1l8k01ebut9xISub0o71F$BChFP1EUR6hfIqgzp09Cvsst4A$fDl$HzxDkHFvg2caLLSMBIAsNAeLzrv59sgoh88g9";}}}}function _$hc(_$Gz,_$vu,_$zY){function _$Jj(){var _$VN=[0];Array.prototype.push.apply(_$VN,arguments);return _$V7.apply(this,_$VN);}var _$Tm,_$Ms,_$hG,_$eK,_$4z,_$O8,_$_l,_$BW,_$yY,_$WU,_$Bw,_$5u,_$_Z,_$zM,_$Xj,_$xs;var _$jd,_$nn,_$GT=_$Gz,_$uf=_$4n[2];while(1){_$nn=_$uf[_$GT++];if(_$nn<16){if(_$nn<4){if(_$nn<1){_$eK.open('GET',_$Ms,false);}else if(_$nn<2){var _$_Z=_$hc(11);}else if(_$nn<3){var _$5u=_$hc(11);}else{if( !_$jd)_$GT+=4;}}else if(_$nn<8){if(_$nn<5){var _$O8=_$vP();}else if(_$nn<6){_$GT+=-15;}else if(_$nn<7){var _$Xj=_$hc(11);}else{_$V7(41,_$zY);}}else if(_$nn<12){if(_$nn<9){var _$WU=_$vP();}else if(_$nn<10){var _$Ms=new Array(_$Tm);}else if(_$nn<11){return;}else{_$GT+=15;}}else{if(_$nn<13){var _$BW=_$vP();}else if(_$nn<14){_$eK.send();}else if(_$nn<15){var _$xs=[];}else{var _$Tm=_$hc(11);}}}else if(_$nn<32){if(_$nn<20){if(_$nn<17){var _$yY=_$vP();}else if(_$nn<18){var _$4z=_$vP();}else if(_$nn<19){var _$Ms=_$vP();}else{return _$Ms;}}else if(_$nn<24){if(_$nn<21){var _$Bw=_$vP();}else if(_$nn<22){var _$_l=_$vP();}else if(_$nn<23){var _$zM=_$hc(11);}else{_$eK.onreadystatechange=_$Jj;}}else if(_$nn<28){if(_$nn<25){var _$Tm=document.scripts.length;}else if(_$nn<26){for(_$hG=0;_$hG<_$Tm;_$hG++ ){_$Ms[_$hG]=_$vP();}}else if(_$nn<27){var _$Tm=_$vP();}else{_$f9[_$vu]=_$Tm;}}else{if(_$nn<29){var _$eK=_$vP();}else if(_$nn<30){_$eK=_$NX.ActiveXObject?new _$NX.ActiveXObject('Microsoft.XMLHTTP'):new _$NX.XMLHttpRequest();}else if(_$nn<31){_$jd=_$Ms;}else{}}}else{if(_$nn<33){var _$Ms=_$Tm>1?document.scripts[_$Tm-2].src:_$4G;}else{for(_$hG=0;_$hG<_$Ms;_$hG++ ){_$xs[_$hG]=_$hc(11);}}}}function _$V7(_$Ms,_$oj){var _$EQ,_$Tm;var _$Gz,_$jd,_$hG=_$Ms,_$VN=_$4n[3];while(1){_$jd=_$VN[_$hG++];if(_$jd<16){if(_$jd<4){if(_$jd<1){_$Gz=_$_Z.length;}else if(_$jd<2){_$hG+=-34;}else if(_$jd<3){_$Gz=_$xs.length;}else{_$oj.push(_$6x[_$O8]);}}else if(_$jd<8){if(_$jd<5){_$oj.push("++];");}else if(_$jd<6){_$hG+=8;}else if(_$jd<7){_$oj.push(_$6x[_$BW]);}else{_$oj.push("=$_ts.aebi;");}}else if(_$jd<12){if(_$jd<9){_$oj.push("=0,");}else if(_$jd<10){_$oj.push("){");}else if(_$jd<11){_$oj.push("var ");}else{_$oj.push(_$6x[_$eK]);}}else{if(_$jd<13){_$Gz=_$eK.readyState==4;}else if(_$jd<14){return;}else if(_$jd<15){_$oj.push("[");}else{_$oj.push("while(1){");}}}else if(_$jd<32){if(_$jd<20){if(_$jd<17){_$Gz=_$5u.length;}else if(_$jd<18){if( !_$Gz)_$hG+=8;}else if(_$jd<19){_$oj.push("=");}else{_$oj.push("];");}}else if(_$jd<24){if(_$jd<21){for(_$Tm=0;_$Tm<_$zM.length;_$Tm+=2){_$Re(0,_$zM[_$Tm],_$zM[_$Tm+1],_$oj);}}else if(_$jd<22){_$oj.push(";");}else if(_$jd<23){_$Gz=_$vu==0;}else{for(_$Tm=0;_$Tm<_$5u.length;_$Tm++ ){_$oj.push(",");_$oj.push(_$6x[_$5u[_$Tm]]);}}}else if(_$jd<28){if(_$jd<25){_$Re(11,0,_$xs.length);}else if(_$jd<26){_$oj.push(_$6x[_$_Z[0]]);}else if(_$jd<27){_$oj.push(_$6x[_$I4]);}else{_$hG+=34;}}else{if(_$jd<29){if( !_$Gz)_$hG+=4;}else if(_$jd<30){_$oj.push(_$6x[_$4z]);}else if(_$jd<31){_$oj.push("function ");}else{_$oj.push("=$_ts.scj,");}}}else{if(_$jd<36){if(_$jd<33){_$oj.push(_$6x[_$Bw]);}else if(_$jd<34){_$oj.push("}");}else if(_$jd<35){_$oj.push("(function(){var ");}else{_$d9(29);}}else if(_$jd<40){if(_$jd<37){for(_$Tm=1;_$Tm<_$_Z.length;_$Tm++ ){_$oj.push(",");_$oj.push(_$6x[_$_Z[_$Tm]]);}}else if(_$jd<38){_$d9(78,_$eK.responseText);}else if(_$jd<39){var _$Tm,_$EQ=4;}else{_$Re(38);}}else if(_$jd<44){if(_$jd<41){_$oj.push(_$6x[_$WU]);}else if(_$jd<42){_$oj.push(_$vu);}else if(_$jd<43){if( !_$Gz)_$hG+=1;}else{_$oj.push(",");}}else{if(_$jd<45){if( !_$Gz)_$hG+=9;}else if(_$jd<46){_$oj.push("(");}else if(_$jd<47){_$Gz=_$9g["dfe1675"];}else{_$oj.push(_$6x[_$Nd]);}}}}function _$Re(_$GT,_$wA,_$M5,_$h6){var _$Tm,_$Ms,_$hG,_$Gz;var _$VN,_$uf,_$jd=_$GT,_$FT=_$4n[4];while(1){_$uf=_$FT[_$jd++];if(_$uf<16){if(_$uf<4){if(_$uf<1){_$M5-- ;}else if(_$uf<2){for(;_$wA<_$M5;_$wA++ ){_$oj.push(_$Ms);_$oj.push(_$6x[_$WU]);_$oj.push('<');_$oj.push(_$wA+1);_$oj.push("){");_$Re(2,_$wA);_$Ms="}else if(";}}else if(_$uf<3){_$oj.push("}");}else{_$oj.push(_$c9[_$Tm[_$Ms]]);}}else if(_$uf<8){if(_$uf<5){_$oj.push(_$c9[_$Xj[_$Tm]]);}else if(_$uf<6){}else if(_$uf<7){_$jd+=-41;}else{_$VN=_$Xj.length!=_$Tm;}}else if(_$uf<12){if(_$uf<9){var _$Tm=_$Xj.length;}else if(_$uf<10){_$VN=_$Tm.length!=_$Ms;}else if(_$uf<11){_$Re(11,_$wA,_$M5);}else{_$Ms="if(";}}else{if(_$uf<13){var _$Tm,_$Ms,_$hG,_$Gz=_$M5-_$wA;}else if(_$uf<14){_$jd+=17;}else if(_$uf<15){if( !_$VN)_$jd+=2;}else{var _$Ms=_$Tm.length;}}}else if(_$uf<32){if(_$uf<20){if(_$uf<17){_$Tm-=_$Tm%2;}else if(_$uf<18){for(_$Ms=0;_$Ms<_$Tm;_$Ms+=2){_$oj.push(_$c9[_$Xj[_$Ms]]);_$oj.push(_$6x[_$Xj[_$Ms+1]]);}}else if(_$uf<19){_$oj.push("}else{");}else{_$jd+=8;}}else if(_$uf<24){if(_$uf<21){_$Ms-=_$Ms%2;}else if(_$uf<22){_$jd+=41;}else if(_$uf<23){_$hG=0;}else{for(;_$wA+_$hG<_$M5;_$wA+=_$hG){_$oj.push(_$Ms);_$oj.push(_$6x[_$WU]);_$oj.push('<');_$oj.push(_$wA+_$hG);_$oj.push("){");_$Re(11,_$wA,_$wA+_$hG);_$Ms="}else if(";}}}else if(_$uf<28){if(_$uf<25){_$VN=_$Gz==0;}else if(_$uf<26){var _$Tm=_$xs[_$wA];}else if(_$uf<27){_$jd+=21;}else{_$VN=_$Gz==1;}}else{if(_$uf<29){if( !_$VN)_$jd+=1;}else if(_$uf<30){_$jd+=-42;}else if(_$uf<31){_$Re(2,_$wA);}else{if( !_$VN)_$jd+=7;}}}else{if(_$uf<36){if(_$uf<33){for(k=0;k<_$Ms;k+=2){_$oj.push(_$c9[_$Tm[k]]);_$oj.push(_$6x[_$Tm[k+1]]);}}else if(_$uf<34){_$VN=_$Gz<=_$EQ;}else if(_$uf<35){_$h6.push(["function ",_$6x[_$wA],"(){var ",_$6x[_$_l],"=[",_$M5,"];Array.prototype.push.apply(",_$6x[_$_l],",arguments);return ",_$6x[_$yY],".apply(this,",_$6x[_$_l],");}"].join(''));}else{for(_$Tm=1;_$Tm<7;_$Tm++ ){if(_$Gz<=_$uu[_$Tm]){_$hG=_$uu[_$Tm-1];break;}}}}else{return;}}}}}}}})()</script></head>
<body>
<script type='text/javascript' r='m'>
_$75('CEAv');
</script>

</body>
</html>
<script type="text/javascript" r="m">_$$J();</script>`;
const dom = new JSDOM(html, {
    url: "http://www.fangdi.com.cn/new_house/new_house.html",
    referrer: "http://www.fangdi.com.cn/new_house/new_house.html",
    contentType: "text/html",
    includeNodeLocations: false,
    storageQuota: 5_000_000,
});
const jsDocument = dom.window.document;

const commConfig = require("./config/comm.config.js"); // comm
const envmtConfig = require("./config/envmt.config.js"); // envmt
const inputConfig = require("./config/input.config.js"); // input

const projName = "rs4";

const outputFileName = `./output/${projName}.js`;
const logFileName = `./output/${projName}.log`;
const debugFileName = `./output/${projName}.dbg.js`;

fs.writeFileSync(logFileName, `---- [LOGS] ----`); // clear logs

const initCode = fs.readFileSync("./config/init.js");
const commCode = commConfig.readCode(); // tools + envmt impl
const envmtCode = envmtConfig.readCode(); // environment
const globalCode = commConfig.readFile("globalPlugin"); // comm global plugin
const customCode = inputConfig.readCode(projName, "custom"); // custom hook for proj
const proxyCode = commConfig.readFile("proxyObj"); // comm proxy code
const inputCode = inputConfig.readCode(projName, "input"); // input
const asyncCode = inputConfig.readCode(projName, "async"); // async

const logCode = `/* VM Logs Code */
(function () {
    v9ng.toolsFunc.saveLog = function (args) {
        if (args.length === 1 && typeof args[0] === 'string') {
            v9ng.cache.fs.appendFileSync("${logFileName}", \`
\${(args[0])}\`);
        } else {
            v9ng.cache.fs.appendFileSync("${logFileName}", \`
\${v9ng.toolsFunc.commToString(args)}\`);
        }
    };
})();
`;

const runCode = `
${initCode}
${commCode}
${logCode}
${envmtCode}
${globalCode}
${customCode}
${proxyCode}
${inputCode}
${asyncCode}
`;

const outputCode = `
${initCode}
${commCode}
${envmtCode}
${globalCode}
${customCode}
${proxyCode}
${inputCode}
${asyncCode}
`;

console.log("---- START ----");
const vm = new VM({
    sandbox: {
        fs,
        jsDocument,
    },
});
const script = new VMScript(runCode, debugFileName);
// const result = vm.run(script);
// console.log(result);
vm.run(script);
fs.writeFileSync(outputFileName, runCode);
console.log("---- END ----");